#!/bin/bash

# CVE-Search MCP Server 启动脚本

set -e

echo "Starting CVE-Search MCP Server..."
echo "Project: https://github.com/roadwy/cve-search_mcp"
echo "Base API: https://cve.circl.lu/api/"

# 检查网络连接
echo "Testing network connectivity to CVE-Search API..."
if curl -s --max-time 10 https://cve.circl.lu/api/browse > /dev/null; then
    echo "✅ Network connectivity to CVE-Search API: OK"
else
    echo "⚠️  Warning: Cannot reach CVE-Search API, but server will start anyway"
fi

# 显示版本信息
echo "Python version: $(python --version)"

# 显示可用工具
echo ""
echo "Available MCP Tools:"
echo "- vul_vendors: Get all vendors"
echo "- vul_vendor_products: Get products for a vendor"
echo "- vul_vendor_product_cve: Get CVEs for vendor/product"
echo "- vul_cve_search: Get specific CVE by ID"
echo "- vul_last_cves: Get latest CVEs"
echo "- vul_db_update_status: Get database update status"

echo ""
echo "Starting MCP server..."

# 启动 MCP 服务器
exec python main.py